(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27355934"],{"0e27":function(t,e,a){"use strict";a.r(e);a("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"data-list-container",attrs:{id:"data-list-list-view"}},[e("vs-table",{ref:"table",attrs:{multiple:"",pagination:"","max-items":t.itemsPerPage,search:"",data:t.quotes},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.data;return[e("tbody",t._l(s,(function(a,s){return e("vs-tr",{key:s,attrs:{data:a}},[e("vs-td",[e("p",{staticClass:"product-name font-medium truncate"},[t._v(t._s(a.number))])]),e("vs-td",[e("p",{staticClass:"product-category"},[t._v(t._s(a.client_name))])]),e("vs-td",[e("vs-chip",{staticClass:"product-order-status",attrs:{color:t.getOrderStatusColor(a.quote_status)}},[t._v(t._s(a.quote_status))])],1),e("vs-td",[e("p",{staticClass:"product-price"},[t._v(t._s(a.total_ht)+" DT")])]),e("vs-td",[e("p",{staticClass:"product-price"},[t._v(t._s(a.total_net_ht)+" DT")])]),e("vs-td",[e("p",{staticClass:"product-price"},[t._v(t._s(a.advance)+" DT")])]),e("vs-td",[e("p",{staticClass:"product-price"},[t._v(t._s(a.rest)+" DT")])]),e("vs-td",{staticClass:"whitespace-no-wrap"},[e("feather-icon",{attrs:{icon:"EditIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(e){return t.GetQuote(a)}}}),e("feather-icon",{staticClass:"ml-2",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(e){return e.stopPropagation(),t.DeleteQuote(a)}}}),e("feather-icon",{staticClass:"ml-2",attrs:{icon:"FileIcon",svgClasses:"w-5 h-5 hover:text-success stroke-current"},on:{click:function(e){return e.stopPropagation(),t.activePromptPrint(a)}}})],1)],1)})),1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[e("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[e("div",{staticClass:"flex flex-wrap-reverse items-center data-list-btn-container"}),e("vs-dropdown",{staticClass:"cursor-pointer mb-4 mr-4 items-per-page-handler",attrs:{"vs-trigger-click":""}},[e("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[e("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.itemsPerPage-(t.itemsPerPage-1))+" - "+t._s(t.quotes.length-t.currentPage*t.itemsPerPage>0?t.currentPage*t.itemsPerPage:t.quotes.length)+" of "+t._s(t.queriedItems))]),e("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),e("vs-dropdown-menu",[e("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=4}}},[e("span",[t._v("4")])]),e("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=10}}},[e("span",[t._v("10")])]),e("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=15}}},[e("span",[t._v("15")])]),e("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=20}}},[e("span",[t._v("20")])])],1)],1)],1),e("template",{slot:"thead"},[e("vs-th",{attrs:{"sort-key":"name"}},[t._v("Devis N°")]),e("vs-th",{attrs:{"sort-key":"category"}},[t._v("Nom Client")]),e("vs-th",{attrs:{"sort-key":"order_status"}},[t._v("Statut")]),e("vs-th",{attrs:{"sort-key":"price"}},[t._v("Total HT")]),e("vs-th",{attrs:{"sort-key":"price"}},[t._v("Net a payer HT")]),e("vs-th",{attrs:{"sort-key":"price"}},[t._v("Avance")]),e("vs-th",{attrs:{"sort-key":"price"}},[t._v("Reste")]),e("vs-th",[t._v("Actions")])],1)],2),e("vs-popup",{staticClass:"calendar-event-dialog",attrs:{title:"Détails devis","accept-text":"Modifier","cancel-text":"Supprimer",active:t.activePromptEditQuote},on:{"update:active":function(e){t.activePromptEditQuote=e}}},[e("vs-input",{staticClass:"w-full mt-5 mb-4",attrs:{type:"number","label-placeholder":"Numéro"},model:{value:t.quoteData.number,callback:function(e){t.$set(t.quoteData,"number",e)},expression:"quoteData.number"}}),e("vs-input",{staticClass:"w-full mt-5 mb-4",attrs:{"label-placeholder":"Client"},model:{value:t.quoteData.client_name,callback:function(e){t.$set(t.quoteData,"client_name",e)},expression:"quoteData.client_name"}}),e("vs-input",{staticClass:"w-full mt-5 mb-4",attrs:{"label-placeholder":"Adresse"},model:{value:t.quoteData.client_adr,callback:function(e){t.$set(t.quoteData,"client_adr",e)},expression:"quoteData.client_adr"}}),e("vs-input",{staticClass:"w-full mt-5 mb-4",attrs:{"label-placeholder":"Téléphone"},model:{value:t.quoteData.client_tel,callback:function(e){t.$set(t.quoteData,"client_tel",e)},expression:"quoteData.client_tel"}}),e("vs-input",{staticClass:"w-full mt-5 mb-4",attrs:{type:"number","label-placeholder":"Total HT"},model:{value:t.quoteData.total_ht,callback:function(e){t.$set(t.quoteData,"total_ht",e)},expression:"quoteData.total_ht"}}),e("vs-input",{staticClass:"w-full mt-5 mb-4",attrs:{type:"number","label-placeholder":"Total Net HT"},model:{value:t.quoteData.total_net_ht,callback:function(e){t.$set(t.quoteData,"total_net_ht",e)},expression:"quoteData.total_net_ht"}}),e("vs-input",{staticClass:"w-full mt-5 mb-4",attrs:{type:"number","label-placeholder":"Avance"},on:{change:t.Changedvance},model:{value:t.quoteData.advance,callback:function(e){t.$set(t.quoteData,"advance",e)},expression:"quoteData.advance"}}),e("vs-input",{staticClass:"w-full mt-5 mb-4",attrs:{type:"number","label-placeholder":"Reste"},model:{value:t.quoteData.rest,callback:function(e){t.$set(t.quoteData,"rest",e)},expression:"quoteData.rest"}}),e("label",{attrs:{for:"items"}},[t._v("Statut")]),e("v-select",{staticClass:"mb-3",attrs:{options:["En attente","Confirmé","Annulé "]},model:{value:t.quoteData.quote_status,callback:function(e){t.$set(t.quoteData,"quote_status",e)},expression:"quoteData.quote_status"}}),e("label",{attrs:{for:"items"}},[t._v("Produits")]),e("v-select",{attrs:{disabled:"",id:"items",multiple:"",closeOnSelect:!1,options:t.itemsDataOrderedItems,label:"item",dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.itemsDataOrderedItems,callback:function(e){t.itemsDataOrderedItems=e},expression:"itemsDataOrderedItems"}}),e("br"),e("div",{staticClass:"mt-4"},[e("vs-button",{staticClass:"mr-4",attrs:{"icon-pack":"feather"},on:{click:t.PutQuote}},[t._v("Valider")]),e("vs-button",{attrs:{"icon-pack":"feather",color:"warning"},on:{click:function(e){t.activePromptEditQuote=!1}}},[t._v("Annuler")])],1)],1),e("vs-popup",{attrs:{fullscreen:"",active:t.activePromptPrintQuote},on:{"update:active":function(e){t.activePromptPrintQuote=e}}},[e("div",{attrs:{id:"invoice-page"}},[e("div",{staticClass:"flex flex-wrap items-center justify-between"},[e("vx-input-group",{staticClass:"mb-base mr-3"},[e("template",{slot:"append"},[e("div",{staticClass:"append-text btn-addon"})])],2),e("div",{staticClass:"flex items-center"},[e("vs-button",{staticClass:"mb-base mr-3",attrs:{"icon-pack":"feather",icon:"icon icon-file"},on:{click:t.printInvoice}},[t._v("Imprimer\n            ")])],1)],1),e("vx-card",{attrs:{id:"invoice-container"}},[e("div",{staticClass:"vx-row leading-loose p-base"},[e("div",{staticClass:"vx-col w-full md:w-1/2 mt-base"},[e("img",{attrs:{src:a("4148"),alt:"vuexy-logo"}})]),e("div",{staticClass:"vx-col w-full md:w-1/2 text-right"},[e("h1",[t._v("Devis N°")]),e("p",[t._v(t._s(t.invoiceDetails.invoiceNo))]),e("h6",{staticClass:"mt-4"},[t._v("ARIANA LE")]),e("p",[t._v(t._s(t.invoiceDetails.invoice))]),e("h5",{staticClass:"mt-5 mb-6"},[t._v(t._s(t.companyDetails.name))]),e("h6",{staticClass:"mt-4"},[t._v("Date de début ")]),e("p",[t._v(t._s(t.invoiceDetails.invoiceNo))]),e("h6",[t._v("Date de fin")]),e("p",[t._v(t._s(t.invoiceDetails.invoiceNo))])]),e("div",{staticClass:"vx-col w-full mt-12"},[e("h5",[t._v("Informations du Client")]),e("div",{staticClass:"invoice__recipient-info my-4"},[e("p",[t._v(t._s(t.recipientDetails.fullName))]),e("p",[t._v(t._s(t.recipientDetails.addressLine1))])]),e("div",{staticClass:"invoice__recipient-contact"},[e("p",{staticClass:"flex items-center"},[e("feather-icon",{attrs:{icon:"MailIcon",svgClasses:"h-4 w-4"}}),e("span",{staticClass:"ml-2"},[t._v(t._s(t.recipientDetails.mailId))])],1),e("p",{staticClass:"flex items-center"},[e("feather-icon",{attrs:{icon:"PhoneIcon",svgClasses:"h-4 w-4"}}),e("span",{staticClass:"ml-2"},[t._v(t._s(t.recipientDetails.mobile))])],1)])])]),e("div",{staticClass:"p-base"},[e("vs-table",{attrs:{hoverFlat:"",data:t.invoiceData.tasks},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.data;return t._l(s,(function(a,i){return e("vs-tr",{key:i},[e("vs-td",{attrs:{data:s[i].task}},[t._v(t._s(s[i].task))]),e("vs-td",{attrs:{data:s[i].hours}},[t._v(t._s(s[i].hours))]),e("vs-td",{attrs:{data:s[i].rate}},[t._v(t._s(s[i].rate)+" DT")]),e("vs-td",{attrs:{data:s[i].amount}},[t._v(t._s(s[i].amount)+" DT")])],1)}))}}])},[e("template",{slot:"thead"},[e("vs-th",[t._v("ARTICLES")]),e("vs-th",[t._v("P.U")]),e("vs-th",[t._v("QTE")]),e("vs-th",[t._v("COUT")])],1)],2),e("vs-table",{staticClass:"w-1/2 ml-auto mt-4",attrs:{hoverFlat:"",data:t.invoiceData}},[e("vs-tr",[e("vs-th",[t._v("TOTAL HT")]),e("vs-td",[t._v(t._s(t.invoiceData.subtotal)+" DT")])],1),e("vs-tr",[e("vs-th",[t._v("NET A PAYER HT")]),e("vs-td",[t._v(t._s(t.invoiceData.discountedAmount)+" DT")])],1),e("vs-tr",[e("vs-th",[t._v("AVANCE")]),e("vs-td",[t._v(t._s(t.invoiceData.discountedAmount)+" DT")])],1),e("vs-tr",[e("th",[t._v("RESTE")]),e("td",[t._v(t._s(t.invoiceData.total)+" DT")])])],1)],1),e("div",{staticClass:"invoice__footer text-right p-base"},[e("p",{staticClass:"mb-4",staticStyle:{"text-align":"center"}},[t._v("Mode de paiement : minimum 40% à la confirmation et le reste 24h avant\n              l'évènement.\n            ")]),e("p",{staticStyle:{"text-align":"center"}},[e("span",{staticClass:"mr-8"},[e("b",[t._v("Adresse: ")]),e("span",[t._v("78 Rue Taieb Mhiri, Ariana")])]),e("span",{staticClass:"mr-8"},[e("b",[t._v("Tel: ")]),e("span",[t._v("70 319 178 - 52 864 219")])]),e("span",{staticClass:"mr-8"},[e("b",[t._v("Email: ")]),e("span",[t._v("bharevents@gmail.com")])])])])])],1)])],1)},i=[],n=(a("96cf"),a("1da1")),o=a("ee31"),r=a("4a7a"),c=a.n(r),l=a("bc3a"),u=a.n(l),d={components:{"v-select":c.a},data:function(){return{activePromptPrintQuote:!1,mailTo:"",companyDetails:{name:"Société Afrah Bhar",addressLine1:"Ariana",zipcode:"2080",mailId:"bhar.events@gmail.com",mobile:"70 319 178"},recipientDetails:{fullName:"Peter Stark",addressLine1:"8577 West West Drive ",addressLine2:"Holbrook, NY",zipcode:"90001",mailId:"peter@mail.com",mobile:"+91 988 888 8888"},invoiceDetails:{invoiceNo:"001/2019",invoiceDate:"Mon Dec 10 2018 07:46:00 GMT+0000 (GMT)"},invoiceData:{tasks:[{id:1,task:"Website Redesign",hours:60,rate:15,amount:9e4},{id:2,task:"Newsletter template design",hours:20,rate:12,amount:24e3}],subtotal:114e3,discountPercentage:5,discountedAmount:5700,total:108300},nbTest:0,activePromptEditQuote:!1,quoteData:{},itemsData:[],itemsDataOrdered:[],itemsDataOrderedItems:[],quotes:[],selected:[],itemsPerPage:10,isMounted:!1,addNewDataSidebar:!1,sidebarData:{}}},computed:{currentPage:function(){return this.isMounted?this.$refs.table.currentx:0},queriedItems:function(){return this.$refs.table?this.$refs.table.queriedResults.length:this.quotes.length}},methods:{activePromptPrint:function(){this.activePromptPrintQuote=!0},printInvoice:function(){window.print()},GetQuotes:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("/quotes/",{headers:{Authorization:"Token ".concat(localStorage.getItem("access_token"))}}).then((function(t){e.quotes=t.data}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),deleteData:function(t){this.$store.dispatch("dataList/removeItem",t).catch((function(t){console.error(t)}))},GetQuote:function(t){var e=this;0==this.nbTest?(this.quoteData=t,this.itemsData=this.quoteData.itemsData,this.itemsData.map((function(t){e.itemsDataOrderedItems.push(t.orderedItemData)})),this.activePromptEditQuote=!0,this.nbTest=1):this.quoteData=[]},Changedvance:function(){this.quoteData.rest=this.quoteData.total_net_ht-this.quoteData.advance},PutQuote:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.itemsData.map((function(t){e.quoteData.items.push(t.id)})),t.next=3,u.a.put("/quotes/"+this.quoteData.id+"/",this.quoteData,{headers:{Authorization:"Token ".concat(localStorage.getItem("access_token"))}}).then((function(){e.$vs.notify({title:"Validation avec succès",color:"success"}),e.GetQuotes(),e.activePromptEditQuote=!1})).catch((function(){e.$vs.notify({title:"Erreur de modification",text:"veuillez vérifier vos informations",iconPack:"feather",icon:"icon-alert-circle",color:"danger"}),e.activePromptEditQuote=!0}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),DeleteQuote:function(t){this.quoteData=t,this.$vs.dialog({type:"confirm",color:"danger",title:"Confirmation de la suppression",text:'Supprimer "'.concat(t.number,'"'),acceptText:"Supprimer",accept:this.ConfirmDeleteQuote,cancelText:"Annuler"})},ConfirmDeleteQuote:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.a.delete("/quotes/"+this.quoteData.id+"/",{headers:{Authorization:"Token ".concat(localStorage.getItem("access_token"))}}).then((function(){e.$vs.notify({title:"Suppression avec succès",color:"success"}),e.GetQuotes(),e.activePromptEditquote=!1})).catch((function(){e.$vs.notify({title:"Suppression avec Suppression",text:"veuillez essayer plus tard",iconPack:"feather",icon:"icon-alert-circle",color:"danger"}),e.activePromptEditRealStock=!0}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),PrintQuote:function(t){this.$router.push("/imprimer-devis")},getOrderStatusColor:function(t){return"En attente"==t?"warning":"Confirmé"==t?"success":"Annulé"==t?"danger":"primary"},getPopularityColor:function(t){return t>90?"success":t>70?"primary":t>=50?"warning":t<50?"danger":"primary"},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t}},created:function(){o["a"].isRegistered||(this.$store.registerModule("dataList",o["a"]),o["a"].isRegistered=!0)},mounted:function(){this.isMounted=!0,this.$emit("setAppClasses","invoice-page"),this.GetQuotes()}},v=d,m=(a("2fdd"),a("2877")),p=Object(m["a"])(v,s,i,!1,null,null,null);e["default"]=p.exports},"2fdd":function(t,e,a){"use strict";a("629c")},4148:function(t,e,a){t.exports=a.p+"img/logoPrint.6e1ae9ac.png"},"629c":function(t,e,a){},ee31:function(t,e,a){"use strict";var s={products:[]},i=(a("20d6"),{ADD_ITEM:function(t,e){t.products.unshift(e)},SET_PRODUCTS:function(t,e){t.products=e},UPDATE_PRODUCT:function(t,e){var a=t.products.findIndex((function(t){return t.id==e.id}));Object.assign(t.products[a],e)},REMOVE_ITEM:function(t,e){var a=t.products.findIndex((function(t){return t.id==e}));t.products.splice(a,1)}}),n=a("bb36"),o={addItem:function(t,e){var a=t.commit;return new Promise((function(t,s){n["default"].post("/api/data-list/products/",{item:e}).then((function(s){a("ADD_ITEM",Object.assign(e,{id:s.data.id})),t(s)})).catch((function(t){s(t)}))}))},updateItem:function(t,e){var a=t.commit;return new Promise((function(t,s){n["default"].post("/api/data-list/products/".concat(e.id),{item:e}).then((function(e){a("UPDATE_PRODUCT",e.data),t(e)})).catch((function(t){s(t)}))}))},removeItem:function(t,e){var a=t.commit;return new Promise((function(t,s){n["default"].delete("/api/data-list/products/".concat(e)).then((function(s){a("REMOVE_ITEM",e),t(s)})).catch((function(t){s(t)}))}))}},r={};e["a"]={isRegistered:!1,namespaced:!0,state:s,mutations:i,actions:o,getters:r}}}]);
//# sourceMappingURL=chunk-27355934.afde0fdb.js.map