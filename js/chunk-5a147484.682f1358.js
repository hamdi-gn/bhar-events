(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a147484"],{"11b9":function(e,t,s){"use strict";s("4f1b")},"1ac7":function(e,t,s){},"4f1b":function(e,t,s){},9568:function(e,t,s){},9628:function(e,t,s){},a898:function(e,t,s){"use strict";s("9628")},b534:function(e,t,s){"use strict";s("9568")},bf29:function(e,t,s){"use strict";s("1ac7")},edfa:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"page-user-list"}},[t("vx-card",{ref:"filterCard",staticClass:"user-list-filters mb-8",attrs:{title:"Filtres",actionButtons:""},on:{refresh:e.resetColFilters,remove:e.resetColFilters}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[t("label",{staticClass:"text-sm opacity-75"},[e._v("Administrateur")]),t("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.roleOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.roleFilter,callback:function(t){e.roleFilter=t},expression:"roleFilter"}})],1),t("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[t("label",{staticClass:"text-sm opacity-75"},[e._v("Commercial")]),t("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.roleOptions2,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.roleFilter2,callback:function(t){e.roleFilter2=t},expression:"roleFilter2"}})],1),t("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[t("label",{staticClass:"text-sm opacity-75"},[e._v("Statut")]),t("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.statusOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.statusFilter,callback:function(t){e.statusFilter=t},expression:"statusFilter"}})],1)])]),t("div",{staticClass:"vx-card p-6"},[t("div",{staticClass:"flex flex-wrap items-center"},[t("div",{staticClass:"flex-grow"},[t("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[t("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[t("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.paginationPageSize-(e.paginationPageSize-1))+" - "+e._s(e.usersData.length-e.currentPage*e.paginationPageSize>0?e.currentPage*e.paginationPageSize:e.usersData.length)+" of "+e._s(e.usersData.length))]),t("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),t("vs-dropdown-menu",[t("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(10)}}},[t("span",[e._v("10")])]),t("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(20)}}},[t("span",[e._v("20")])]),t("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(25)}}},[t("span",[e._v("25")])]),t("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(30)}}},[t("span",[e._v("30")])])],1)],1)],1),t("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{placeholder:"chercher..."},on:{input:e.updateSearchQuery},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),t("ag-grid-vue",{ref:"agGridTable",staticClass:"ag-theme-material w-100 my-4 ag-grid-table",attrs:{components:e.components,gridOptions:e.gridOptions,columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowData:e.usersData,rowSelection:"multiple",colResizeDefault:"shift",animateRows:!0,floatingFilter:!0,pagination:!0,paginationPageSize:e.paginationPageSize,suppressPaginationPanel:!0,enableRtl:e.$vs.rtl},on:{"selection-changed":e.onSelectionChanged}}),t("vs-pagination",{attrs:{total:e.totalPages,max:7},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)},i=[],r=(s("c5f6"),s("96cf"),s("1da1")),n=s("401b"),l=(s("4e06"),s("4a7a")),o=s.n(l),c=s("bc3a"),u=s.n(c),d={users:[]},m=(s("20d6"),{SET_USERS:function(e,t){e.users=t},REMOVE_RECORD:function(e,t){var s=e.users.findIndex((function(e){return e.id==t}));e.users.splice(s,1)}}),p=s("bb36"),f={fetchUsers:function(e){var t=e.commit;return new Promise((function(e,s){p["default"].get("/api/user-management/users").then((function(s){t("SET_USERS",s.data),e(s)})).catch((function(e){s(e)}))}))},fetchUser:function(e,t){return new Promise((function(e,s){p["default"].get("/api/user-management/users/".concat(t)).then((function(t){e(t)})).catch((function(e){s(e)}))}))},removeRecord:function(e,t){var s=e.commit;return new Promise((function(e,a){p["default"].delete("/api/user-management/users/".concat(t)).then((function(a){s("REMOVE_RECORD",t),e(a)})).catch((function(e){a(e)}))}))}},v={},h={isRegistered:!1,namespaced:!0,state:d,mutations:m,actions:f,getters:v},g=function(){var e=this,t=e._self._c;return t("vs-chip",{staticClass:"ag-grid-cell-chip",attrs:{color:e.chipColor(e.params.value)}},[t("span",[e._v(e._s(e.params.value))])])},w=[],C={name:"CellRendererStatus",computed:{chipColor:function(){return function(e){return!0===e?"success":"danger"}}}},b=C,_=(s("a898"),s("2877")),x=Object(_["a"])(b,g,w,!1,null,null,null),S=x.exports,R=function(){var e=this,t=e._self._c;return t("vs-chip",{staticClass:"ag-grid-cell-chip",attrs:{color:e.chipColor(e.params.value)}},[t("span",[e._v(e._s(e.params.value))])])},k=[],A={name:"CellRendererStaff",computed:{chipColor:function(){return function(e){return!0===e?"success":"danger"}}}},F=A,P=(s("bf29"),Object(_["a"])(F,R,k,!1,null,null,null)),y=P.exports,D=function(){var e=this,t=e._self._c;return t("vs-chip",{staticClass:"ag-grid-cell-chip",attrs:{color:e.chipColor(e.params.value)}},[t("span",[e._v(e._s(e.params.value))])])},O=[],$={name:"CellRendererAdmin",computed:{chipColor:function(){return function(e){return!0===e?"success":"danger"}}}},T=$,z=(s("b534"),Object(_["a"])(T,D,O,!1,null,null,null)),E=z.exports,N=function(){var e=this,t=e._self._c;return t("div",{style:{direction:e.$vs.rtl?"rtl":"ltr"}},[t("feather-icon",{attrs:{icon:"Edit3Icon",svgClasses:"h-5 w-5 mr-4 hover:text-primary cursor-pointer"},on:{click:[function(t){return t.preventDefault(),e.getDataFromParams.apply(null,arguments)},function(t){e.popupActive2=!0}]}}),t("feather-icon",{attrs:{icon:"Trash2Icon",svgClasses:"h-5 w-5 hover:text-danger cursor-pointer"},on:{click:e.confirmDeleteRecord}}),t("vs-popup",{attrs:{classContent:"popup-example",title:"Formulaire de modification",active:e.popupActive2},on:{"update:active":function(t){e.popupActive2=t}}},[t("div",{staticClass:"vx-row mb-6"},[t("div",{staticClass:"vx-col sm:w-1/3 w-full"},[t("span",[e._v("Nom")])]),t("div",{staticClass:"vx-col sm:w-2/3 w-full"},[t("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-user","icon-no-border":""},model:{value:e.user.first_name,callback:function(t){e.$set(e.user,"first_name",t)},expression:"user.first_name"}})],1)]),t("div",{staticClass:"vx-row mb-6"},[t("div",{staticClass:"vx-col sm:w-1/3 w-full"},[t("span",[e._v("Prénom")])]),t("div",{staticClass:"vx-col sm:w-2/3 w-full"},[t("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-user","icon-no-border":""},model:{value:e.user.last_name,callback:function(t){e.$set(e.user,"last_name",t)},expression:"user.last_name"}})],1)]),t("div",{staticClass:"vx-row mb-6"},[t("div",{staticClass:"vx-col sm:w-1/3 w-full"},[t("span",[e._v("Nom d'utilisateur")])]),t("div",{staticClass:"vx-col sm:w-2/3 w-full"},[t("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-user","icon-no-border":""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1)]),t("div",{staticClass:"vx-row mb-6"},[t("div",{staticClass:"vx-col sm:w-1/3 w-full"},[t("span",[e._v("Email")])]),t("div",{staticClass:"vx-col sm:w-2/3 w-full"},[t("vs-input",{staticClass:"w-full",attrs:{type:"email","icon-pack":"feather",icon:"icon-mail","icon-no-border":""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)]),t("div",{staticClass:"vx-row mb-6"},[t("div",{staticClass:"vx-col w-full"},[t("vs-checkbox",{model:{value:e.user.is_staff,callback:function(t){e.$set(e.user,"is_staff",t)},expression:"user.is_staff"}},[e._v("Commercial")])],1)]),t("div",{staticClass:"vx-row mb-6"},[t("div",{staticClass:"vx-col w-full"},[t("vs-checkbox",{attrs:{color:"success"},model:{value:e.user.is_superuser,callback:function(t){e.$set(e.user,"is_superuser",t)},expression:"user.is_superuser"}},[e._v("Administrateur")])],1)]),t("div",{staticClass:"vx-row mb-6"},[t("div",{staticClass:"vx-col w-full"},[t("vs-checkbox",{attrs:{color:"success"},model:{value:e.user.is_active,callback:function(t){e.$set(e.user,"is_active",t)},expression:"user.is_active"}},[e._v("Actif")])],1)]),t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col sm:w-2/3 w-full ml-auto"},[t("vs-button",{staticClass:"mr-3 mb-2",on:{click:e.editRecord}},[e._v("Modifier")]),t("vs-button",{staticClass:"mb-2",attrs:{color:"warning",type:"border"},on:{click:function(t){e.popupActive2=!1}}},[e._v("Annuler")])],1)])])],1)},G=[],j={name:"CellRendererActions",data:function(){return{componentKey:0,popupActive2:!1,user:{first_name:"",last_name:"",email:"",username:"",is_staff:"",is_superuser:"",password:"",is_active:""}}},methods:{getDataFromParams:function(){this.user.first_name=this.params.data.first_name,this.user.last_name=this.params.data.last_name,this.user.username=this.params.data.username,this.user.email=this.params.data.email,this.user.is_staff=this.params.data.is_staff,this.user.is_superuser=this.params.data.is_superuser,this.user.is_active=this.params.data.is_active,this.user.password=this.params.data.password},confirmDeleteRecord:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirmation de la suppression",text:'Supprimer "'.concat(this.params.data.first_name," ").concat(this.params.data.last_name,'"'),accept:this.deleteRecord,acceptText:"Supprimer",cancelText:"Annuler"})},deleteRecord:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.delete("/users/".concat(this.params.data.id,"/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("access_token"))}}).then((function(){t.showDeleteSuccess()}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showDeleteSuccess:function(){this.$vs.notify({color:"success",title:"Utilisateur supprimé"})},editRecord:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.put("/users/".concat(this.params.data.id,"/"),this.user,{headers:{Authorization:"Token ".concat(localStorage.getItem("access_token"))}}).then((function(){t.showEditSuccess(),t.popupActive2=!1,t.Getusers})).catch((function(){t.$vs.notify({title:"Erreur de modification",text:"veuillez vérifier vos informations",iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showEditSuccess:function(){this.$vs.notify({color:"success",title:"Utilisateur modifié"})}}},I=j,M=Object(_["a"])(I,N,G,!1,null,null,null),Q=M.exports,U={components:{AgGridVue:n["AgGridVue"],vSelect:o.a,CellRendererStatus:S,CellRendererActions:Q,CellRendererStaff:y,CellRendererAdmin:E},data:function(){return{usersData:[],roleFilter:{label:"Tout",value:"all"},roleOptions:[{label:"Tout",value:"all"},{label:"Administrateur",value:"true"}],roleFilter2:{label:"Tout",value:"all"},roleOptions2:[{label:"Tout",value:"all"},{label:"Commercial",value:"true"}],statusFilter:{label:"Tout",value:"all"},statusOptions:[{label:"Tout",value:"all"},{label:"Active",value:"true"},{label:"Désactivé",value:"false"}],searchQuery:"",gridApi:null,gridOptions:{},defaultColDef:{sortable:!0,resizable:!0,suppressMenu:!0},columnDefs:[{headerName:"ID",field:"id",filter:!0,width:120,checkboxSelection:!0},{headerName:"Nom",field:"first_name",filter:!0,width:170},{headerName:"Prénom",field:"last_name",filter:!0,width:170},{headerName:"Email",field:"email",filter:!0,width:225},{headerName:"Admin",field:"is_superuser",filter:!0,width:150,cellRendererFramework:"CellRendererAdmin"},{headerName:"Commercial",field:"is_staff",filter:!0,width:150,cellRendererFramework:"CellRendererStaff"},{headerName:"Statut",field:"is_active",filter:!0,width:100,cellRendererFramework:"CellRendererStatus"},{headerName:"Actions",field:"transactions",width:150,cellRendererFramework:"CellRendererActions"}],components:{CellRendererStatus:S,CellRendererActions:Q,CellRendererStaff:y,CellRendererAdmin:E}}},watch:{roleFilter:function(e){this.setColumnFilter("is_superuser",e.value)},roleFilter2:function(e){this.setColumnFilter("is_staff",e.value)},statusFilter:function(e){this.setColumnFilter("is_active",e.value)}},computed:{paginationPageSize:function(){return this.gridApi?this.gridApi.paginationGetPageSize():10},totalPages:function(){return this.gridApi?this.gridApi.paginationGetTotalPages():0},currentPage:{get:function(){return this.gridApi?this.gridApi.paginationGetCurrentPage()+1:1},set:function(e){this.gridApi.paginationGoToPage(e-1)}}},methods:{Getusers:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/users/",{headers:{Authorization:"Token ".concat(localStorage.getItem("access_token"))}}).then((function(e){t.usersData=e.data}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onSelectionChanged:function(){this.gridApi.getSelectedRows()},setColumnFilter:function(e,t){var s=this.gridApi.getFilterInstance(e),a=null;"all"!==t&&(a={type:"equals",filter:t}),s.setModel(a),this.gridApi.onFilterChanged()},resetColFilters:function(){this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged(),this.roleFilter=this.statusFilter=this.this.roleFilter2={label:"Tout",value:"all"},this.$refs.filterCard.removeRefreshAnimation()},updateSearchQuery:function(e){this.gridApi.setQuickFilter(e)}},mounted:function(){if(this.Getusers(),this.gridApi=this.gridOptions.api,this.$vs.rtl){var e=this.$refs.agGridTable.$el.querySelector(".ag-header-container");e.style.left="-"+String(Number(e.style.transform.slice(11,-3))+9)+"px"}},created:function(){h.isRegistered||(this.$store.registerModule("userManagement",h),h.isRegistered=!0)}},V=U,q=(s("11b9"),Object(_["a"])(V,a,i,!1,null,null,null));t["default"]=q.exports}}]);
//# sourceMappingURL=chunk-5a147484.682f1358.js.map